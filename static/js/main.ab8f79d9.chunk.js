(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,n){e.exports=n(40)},31:function(e,t,n){},37:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(21),i=n.n(o),c=(n(31),n(7)),l=n(8),s=n(10),u=n(9),m=n(11),d=n(4),p=n(42),h=n(44),v=n(43),f=(n(37),n(12)),E=n(23),b=n(5),g="https://rest-api-broot.glitch.me/api/Andrey";function y(e){return function(t){return t(H()),fetch("".concat(g,"/products/").concat(e)).then(O).then(function(e){return e.json()}).then(function(e){return t(R(e)),e}).catch(function(e){return t(F(e))})}}function O(e){if(!e.ok)throw Error(e.statusText);return e}function N(e){return function(t){t(A(e))}}function C(e){return function(t){t(I(e))}}function w(e){return function(t){t(D(e))}}var _="FETCH_PRODUCTS_BEGIN",j="FETCH_PRODUCTS_SUCCESS",x="FETCH_PRODUCTS_FAILURE",M="FETCH_PRODUCT_SUCCESS",k="FETCH_EDIT_PRODUCT_FAILURE",L="CHANGE_SEARCHTEXT",S="CHANGE_MOVIELENGTHMAX",T="CHANGE_MOVIELENGTHMIN",D=function(e){return{type:T,payload:e}},I=function(e){return{type:S,payload:e}},A=function(e){return{type:L,payload:e}},H=function(){return{type:_}},P=function(e){return{type:j,payload:{products:e}}},R=function(e){return{type:M,payload:{products:e}}},F=function(e){return{type:x,payload:{error:e}}},U=function(){return{type:"FETCH_EDIT_PRODUCT_BEGIN"}},W=function(e){return{type:k,payload:{error:e}}},G={items:[],loading:!1,error:null,edit:!1,searchText:"",movieLengthMax:"3000",movieLengthMin:"0"};var B=n(25),J="ADD_MOVIE";function V(e){return function(t){t(X(e))}}var X=function(e){return{type:J,payload:e}},z={items:[],loading:!1,error:null,edit:!1};var K=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.d,$=Object(f.e)(Object(f.c)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(b.a)({},e,{loading:!0,error:null});case j:return Object(b.a)({},e,{loading:!1,items:t.payload.products});case M:return Object(b.a)({},e,{loading:!1,items:[t.payload.products]});case x:case k:return Object(b.a)({},e,{loading:!1,error:t.payload.error,items:[]});case L:return console.log(t.payload),Object(b.a)({},e,{searchText:t.payload});case S:return Object(b.a)({},e,{movieLengthMax:t.payload});case T:return Object(b.a)({},e,{movieLengthMin:t.payload});default:return e}},watchLater:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:var n=e.items.find(function(e){return e.id===t.payload.id});return n?n?Object(b.a)({},e,{items:e.items.filter(function(e){return e.id!==t.payload.id})}):e:Object(b.a)({},e,{items:[].concat(Object(B.a)(e.items),[t.payload])});default:return e}}}),function(){try{var e=localStorage.getItem("watchLater");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),K(Object(f.a)(E.a)));$.subscribe(function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("watchLater",t)}catch(n){}}({watchLater:$.getState().watchLater})}),window.store=$;var q=$,Q=n(41),Y=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.search,a=t.number;return r.a.createElement("div",{className:"Header_Page"},r.a.createElement("div",{className:"Header_Page_Cover "},r.a.createElement(Q.a,{to:"/"},r.a.createElement("h2",{className:""},"Home")),r.a.createElement("div",{className:"input-group ",style:{width:"300px"}},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-default"},"Search")),r.a.createElement("input",{type:"text",className:"form-control",arialabel:"Default",placeholder:"Movie name",ariadescribedby:"inputGroup-sizing-default",value:n,onChange:function(t){return e.props.dispatch(N(t.target.value))}})),r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenu2","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Movie length"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenu2"},r.a.createElement("button",{className:"dropdown-item",type:"button",value:"130",onClick:function(t){e.props.dispatch(C(t.target.value)),e.props.dispatch(w(0))}},"less than 130min"),r.a.createElement("button",{className:"dropdown-item",type:"button",value:"130",onClick:function(t){e.props.dispatch(w(t.target.value)),e.props.dispatch(C(parseInt(160)))}},"from 130 to 160"),r.a.createElement("button",{className:"dropdown-item",type:"button",value:"160",onClick:function(t){e.props.dispatch(w(t.target.value)),e.props.dispatch(C(parseInt(300)))}},"more than 160"),r.a.createElement("button",{className:"dropdown-item",type:"button",onClick:function(){e.props.dispatch(C(3e3)),e.props.dispatch(w(0))}},"All movies"))),r.a.createElement(Q.a,{to:"/watchlater"},r.a.createElement("button",{type:"button",className:"btn btn-primary"},"Movies to watch"," ",r.a.createElement("span",{className:"badge badge-light"},a)))))}}]),t}(r.a.Component),Z=Object(d.b)(function(e){return{search:e.movies.searchText,number:e.watchLater.items.length}},null)(Y);var ee={AddToWatchLater:V},te=Object(d.b)(function(e){return{movies:e.watchLater.items}},ee)(function(e){var t=e.product,n=e.AddToWatchLater,a=e.movies;return r.a.createElement("div",{className:"Single_Movie"},r.a.createElement(Q.a,{to:"/products/".concat(t.id)},r.a.createElement("div",{style:ne.product_block},r.a.createElement("div",{style:ne.img_block},r.a.createElement("img",{style:ne.img,src:t.image,alt:"Smiley face"})),r.a.createElement("div",{className:"Single_Movie_Name"},r.a.createElement("div",{style:{margin:"auto",display:"flex"}},r.a.createElement("h5",{className:"text-dark"},t.name))),r.a.createElement("div",null,r.a.createElement("h5",{className:"text-dark"},"Film length (",t.price," min)")))),r.a.createElement("div",{className:"Single_Movie_Bottom"},r.a.createElement(Q.a,{className:"w-50",to:"/products/".concat(t.id)},r.a.createElement("button",{type:"button",class:"btn btn-info w-100"},"Info")),r.a.createElement(function(e){var a=e.movies.find(function(t){return t.id===e.product.id});return a?a?r.a.createElement("button",{type:"button",className:"btn btn-secondary btn-sm w-50",onClick:function(){return n(t)}},"Remove"):void 0:r.a.createElement("button",{type:"button",className:"btn btn-secondary btn-sm w-50",onClick:function(){return n(t)}},"Watch later")},{movies:a,product:t})))}),ne={img_block:{height:"350px",":hover":{border:"1px solid black"}},img:{height:"100%",maxWidth:"100%",minWidth:"70%"},single_product:{display:"flex",width:"auto",flexDirection:"column",justifyContent:"center",textAlign:"center"},product_block:{display:"flex",flexDirection:"column"},product_name:{height:"30px"}},ae=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(function(e){return e(H()),fetch("".concat(g,"/products")).then(O).then(function(e){return e.json()}).then(function(t){return e(P(t)),t}).catch(function(t){return e(F(t))})}),this.props.dispatch(N(""))}},{key:"render",value:function(){var e=this.props,t=e.error,n=e.loading,a=e.movies,o=e.search,i=e.maxLength,c=e.minLength;return t?r.a.createElement("div",null,"Error! ",t.message):n?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",{className:"All_Movies "},a.filter(function(e){return e.name.toLowerCase().includes(o.toLowerCase())}).filter(function(e){return e.price<i&&e.price>c}).map(function(e){return r.a.createElement(te,{product:e,key:e.id})}))}}]),t}(r.a.Component),re=Object(d.b)(function(e){return{movies:e.movies.items,loading:e.movies.loading,error:e.movies.error,search:e.movies.searchText,maxLength:e.movies.movieLengthMax,minLength:e.movies.movieLengthMin}},null)(ae),oe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={editMovie:{name:"",price:"",image:"",description:""},edit:"none"},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchProduct(this.props.match.params.id)}},{key:"handleChange",value:function(e){var t=Object(b.a)({},this.state.editMovie),n=e.target.name,a=e.target.value;t[n]=a,this.setState({editMovie:t})}},{key:"checkIt",value:function(e){return"none"===this.state.edit?this.setState({editMovie:e,edit:"block"}):this.setState({edit:"none"})}},{key:"render",value:function(){var e=this,t=this.props,n=t.error,a=t.loading,o=t.movie,i=t.movies,c=t.AddToWatchLater;return n?r.a.createElement("div",null,"Error! ",n.message):a?r.a.createElement("div",null,"Loading..."):o?r.a.createElement("div",{style:{flex:"1"}},r.a.createElement("div",{className:"Single_Movie_Edit"},r.a.createElement("div",{style:{width:"300px"}},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("img",{src:o.image,alt:"Smiley face"})),r.a.createElement("div",{className:"Single_Movie_Name"},r.a.createElement("div",null,r.a.createElement("h5",null,o.name)))),r.a.createElement("div",{className:"Single_Movie_Bottom"},r.a.createElement("button",{onClick:function(){return e.checkIt(o)},type:"button",class:"btn btn-info w-50"},"Edit"),r.a.createElement(function(e){console.log(e.movie);var t=e.movies.find(function(t){return t.id===e.movie.id});return t?t?r.a.createElement("button",{type:"button",className:"btn btn-secondary btn-sm w-50",onClick:function(){return c(e.movie)}},"Remove from list"):r.a.createElement("div",null,"dhasudyasdgu"):r.a.createElement("button",{type:"button",className:"btn btn-secondary btn-sm w-50",onClick:function(){return c(e.movie)}},"Watch later")},{movies:i,movie:o}))),r.a.createElement("div",{className:"Single_Movie_Description"},r.a.createElement("h3",null,"Description"),r.a.createElement("p",null,o.description))),r.a.createElement("div",{className:"Edit_Movie"},r.a.createElement("form",{style:{display:this.state.edit}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Name"),r.a.createElement("input",{type:"text",className:"form-control",ref:o.name,name:"name",value:this.state.editMovie.name,onChange:this.handleChange.bind(this)})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Film length"),r.a.createElement("input",{type:"text",name:"price",className:"form-control",id:"exampleFormControlInput1",value:this.state.editMovie.price,onChange:this.handleChange.bind(this)})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Image"),r.a.createElement("input",{type:"text",name:"image",className:"form-control",value:this.state.editMovie.image,onChange:this.handleChange.bind(this)})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Description"),r.a.createElement("textarea",{className:"form-control",name:"description",rows:"9",value:this.state.editMovie.description,onChange:this.handleChange.bind(this)})),r.a.createElement("button",{onClick:function(t){t.preventDefault(),e.props.fetchEditProduct(e.state.editMovie.id,e.state.editMovie)},type:"button",class:"btn btn-success"},"Send Changes"),r.a.createElement("button",{onClick:function(){return e.setState({edit:"none"})},type:"button",class:"btn btn-dark"},"Cancel Edit")))):r.a.createElement("div",null)}}]),t}(r.a.Component),ie={AddToWatchLater:V,fetchProduct:y,fetchEditProduct:function(e,t){return function(n){return n(U()),fetch("".concat(g,"/products/").concat(e),{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PATCH",body:JSON.stringify(t)}).then(O).catch(function(e){return n(W(e))}).then(n(y(e)))}}},ce=Object(d.b)(function(e,t){return{movie:e.movies.items.find(function(e){return e.id===t.match.params.id}),loading:e.movies.loading,error:e.movies.error,movies:e.watchLater.items}},ie)(oe),le=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{flex:"1"}},this.props.movies.filter(function(t){return t.name.toLowerCase().includes(e.props.search.toLowerCase())}).filter(function(t){return t.price<e.props.maxLength&&t.price>e.props.minLength}).map(function(t){return r.a.createElement("div",{key:t.id},r.a.createElement("div",{className:"Single_Movie_Edit"},r.a.createElement("div",{style:{width:"300px"}},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("img",{src:t.image,alt:"Smiley face"})),r.a.createElement("div",{className:"Single_Movie_Name"},r.a.createElement("div",null,r.a.createElement("h5",null,t.name)))),r.a.createElement("div",{className:"Single_Movie_Bottom"},r.a.createElement("button",{onClick:function(){return e.props.dispatch(V(t))},type:"button",class:"btn btn-dark"},"Remove from list"))),r.a.createElement("div",{className:"Single_Movie_Description"},r.a.createElement("h3",null,"Description"),r.a.createElement("p",null,t.description))))}))}}]),t}(r.a.Component),se=Object(d.b)(function(e){return{movies:e.watchLater.items,search:e.movies.searchText,maxLength:e.movies.movieLengthMax,minLength:e.movies.movieLengthMin}},null)(le),ue=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",{className:"page-footer font-small special-color-dark pt-4"},r.a.createElement("div",{className:" text-center py-3"},"\xa9 2018 Copyright:",r.a.createElement("a",{href:"#"}," Kombo")))}}]),t}(r.a.Component),me=Object(d.b)(function(e){return{movies:e.watchLater.items,search:e.movies.searchText}},null)(ue),de=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(d.a,{store:q},r.a.createElement(p.a,null,r.a.createElement("div",{className:"App_Cover"},r.a.createElement(Z,null),r.a.createElement(h.a,null,r.a.createElement(v.a,{path:"/watchlater",component:se}),r.a.createElement(v.a,{exact:!0,path:"/",component:re}),r.a.createElement(v.a,{exact:!0,path:"/products",component:re}),r.a.createElement(v.a,{path:"/products/:id",component:ce})),r.a.createElement(me,null)))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(de,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[26,2,1]]]);
//# sourceMappingURL=main.ab8f79d9.chunk.js.map